---
layout: default
title: Backbone
---

<h2>{{ page.title }}</h2>

<p>{{ page.date | date_to_string }}</p>
<script>
    $(window).load(function () {
        $("pre").addClass("prettyprint linenums");
        prettyPrint();
    })
</script>

<p>Backbone如何得知attribute has changed</p>
<pre>
        //...

    // Run validation.
    if (!options.silent && this.validate && !this._performValidation(attrs, options)) return false;

    //...

    // Update attributes.
    for (var attr in attrs) {
        var val = attrs[attr];
        if (!_.isEqual(now[attr], val)) {
            now[attr] = val;
            delete escaped[attr];
            this._changed = true;
            if (!options.silent) this.trigger('change:' + attr, this, val, options);
        }
    }

   </pre>

<p>如何设置id</p>
        <pre>
    window.app.IHoliday = Backbone.Model.extend({
        urlRoot: HOLIDAY_URL,
        idAttribute: 'holiday_id',
        // Default attributes for the holiday.
        defaults: {
        },

        initialize: function (props) {
        }
    });

    var Holiday = new window.app.IHoliday({holiday_id: holiday_id });
        </pre>